<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Price Calc</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; position: relative; }
  .calculator { margin-top: 20px; padding: 15px; border: 1px solid #ccc; width: 300px; }
  label { display: block; margin-top: 10px; }
  input { width: 100%; padding: 5px; margin-top: 5px; }
  button { margin-top: 10px; padding: 10px; cursor: pointer; }
  .top-right-buttons {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 1000;
  }
  #sellingBox {
    position: fixed;
    top: 100px;
    right: 20px;
    background: #f1f1f1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    display: none;
    width: 200px;
    z-index: 999;
  }
    .screen{
        background-color: rgb(5, 43, 43);
        color: white;
    }

#capital, #selling, #grandTotal, #pCapital, #pSelling{
    color: greenyellow;
}
</style>
</head>
<body>

<div class="top-right-buttons">
  <button id="pworldBtn">pworld</button>
  <button id="sellingBtn">Selling</button>
</div>

<div class="calculator" id="mainCalculator">
  <h3>Main Calculator</h3>
  <label>Total Cost:
    <input type="number" class="tabEnter" id="totalCost" value="1500">
  </label>
  <label>Quantity:
    <input type="number" class="tabEnter" id="quantity" value="234">
  </label>
  <button id="mainCalcBtn" onclick="calculateMain()">Calculate</button>
<div class="screen">

  <p>Capital per item: <span id="capital">0</span></p>
  <p>Selling price (5%): <span id="selling">0</span></p>
  </div>
</div>

<div class="calculator" id="pworldCalculator" style="display:none;">
  <h3>Pworld Calculator</h3>
  <label>Total:
    <input type="number" class="tabEnter" id="pTotal" value="1500">
  </label>
  <label>Quantity:
    <input type="number" class="tabEnter" id="pQuantity" value="234">
  </label>
  <button id="pworldCalcBtn" onclick="calculatePworld()">Calculate</button>
  <div class="screen">
  <p>New Total : <span id="grandTotal">0</span></p>
  <p>Capital: <span id="pCapital">0</span></p>
  <p>Selling price(5%): <span id="pSelling">0</span></p>
  </div>
</div>

<div id="sellingBox">
  <label>Capital:
    <input type="number" class="tabEnter" id="floatCapital" value="45">
  </label>
  <button id="sellingCalcBtn" onclick="calculateSelling()">Calculate Selling</button>
  <p>Selling Price: <span id="floatSelling">0</span></p>
</div>

<script>
function calculateMain() {
  let totalCost = parseFloat(document.getElementById('totalCost').value);
  let quantity = parseFloat(document.getElementById('quantity').value);
  let capital = totalCost / quantity;
  let selling = capital * 1.05;

  document.getElementById('capital').innerText = capital.toFixed(2);
  document.getElementById('selling').innerText = selling.toFixed(2);
}

function calculatePworld() {
  let total = parseFloat(document.getElementById('pTotal').value);
  let quantity = parseFloat(document.getElementById('pQuantity').value);

  let grandTotal = total * 0.97 * 0.99;
  let capital = grandTotal / quantity;
  let selling = capital * 1.05;

  document.getElementById('grandTotal').innerText = grandTotal.toFixed(2);
  document.getElementById('pCapital').innerText = capital.toFixed(2);
  document.getElementById('pSelling').innerText = selling.toFixed(2);
}

function calculateSelling() {
  let capital = parseFloat(document.getElementById('floatCapital').value);
  let selling = capital * 1.05;
  document.getElementById('floatSelling').innerText = selling.toFixed(2);
}

// Toggle calculator visibility
document.getElementById('pworldBtn').addEventListener('click', () => {
  const pworldCalc = document.getElementById('pworldCalculator');
  const mainCalc = document.getElementById('mainCalculator');
  const btn = document.getElementById('pworldBtn');
  
  if (pworldCalc.style.display === 'none') {
    pworldCalc.style.display = 'block';
    mainCalc.style.display = 'none';
    btn.innerText = 'main';
  } else {
    pworldCalc.style.display = 'none';
    mainCalc.style.display = 'block';
    btn.innerText = 'pworld';
  }
});

// Toggle floating selling box
document.getElementById('sellingBtn').addEventListener('click', () => {
  const box = document.getElementById('sellingBox');
  box.style.display = box.style.display === 'none' ? 'block' : 'none';
});

// EN
function setupEnterToTabOrCalculate(containerSelector, calcBtnId) {
  const inputs = document.querySelectorAll(containerSelector + ' input.tabEnter');
  inputs.forEach((input, index) => {
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        if (index + 1 < inputs.length) {
          inputs[index + 1].focus();
        } else {
          document.getElementById(calcBtnId).click();
        }
      }
    });
  });
}

// Setup
setupEnterToTabOrCalculate('#mainCalculator', 'mainCalcBtn');
setupEnterToTabOrCalculate('#pworldCalculator', 'pworldCalcBtn');
setupEnterToTabOrCalculate('#sellingBox', 'sellingCalcBtn');
</script>

</body>
</html>
